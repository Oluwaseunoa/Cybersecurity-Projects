# Red Team Project: Remote Access Trojan with Theef
**Author:** Oluwaseun Osunsola  
**Environment:** Windows   
**Project Link:** https://github.com/Oluwaseunoa/Cybersecurity-Projects/tree/main/Red-Teaming/Malware-Attack-Projects/Remote-Access-Trojan

## Overview 
This project showcases a controlled simulation of a Remote Access Trojan (RAT) attack using the Theef tool. The goal is to demonstrate a red team scenario where an attacker compromises a victim machine to perform reconnaissance and malicious activities like process monitoring and keylogging. The environment is built using VMware Pro, with Windows 10 as the attacker, Windows Server 2022 as the victim, and pfSense as the firewall for network control.

## Environment and Tools

**Virtualization:** VMware Pro  
**Attacker Machine:** Windows 10  
**Victim Machine:** Windows Server 2022  
**Firewall:** pfSense  
**RAT Tool:** Theef (version 2.10, including server210.exe and client210.exe)  

The setup uses a shared network drive for tool distribution and assumes permissive pfSense firewall rules to allow Theef’s default FTP and connection ports.

---

## Project Steps

### 1. Identify Attacker and Victim Machines
Designate Windows 10 as the attacker and Windows Server 2022 as the victim.  
![Attacker and Victim](./img/1.determine_the_attacker(windows10)_and_victim_machine(windows_server2022).png)

---

### 2. Snapshot Victim Machine
Take a clean snapshot of the Windows Server 2022 (victim) for rollback if needed.  
![Snapshot Victim](./img/2.ensure_to_take_a_good_snapshot_of_windows_server(victim).png)  
![Snapshot Taken](./img/3.snapshot_taken_close_the_dialog_box.png)

---

### 3. Enable Firewall
Power on the pfSense firewall and configure it to permit traffic between attacker and victim.  
![pfSense Firewall](./img/4.ensure_your_firewall(pfsense)_is_powered_on.png)

---

### 4. Access Victim Machine
Log in to the powered-on Windows Server 2022 (victim).  
![Victim Login](./img/5.switch_to_the_powerred_on_windows_server(target)_and_log_in.png)

---

### 5. Install Theef Server on Victim
Locate the Theef RAT folder, run `server210.exe`, and bypass the security warning. The server runs in the background.  
![Locate Theef](./img/6.locate_your_THEEF_remote_access_trojan_folder.png)  
![Run Server210](./img/7.double-click_on_server210.png)  
![Bypass Warning](./img/8.click_run_on_security_warning_dialog_box.png)  
![Server Running](./img/9.server_running_in_background.png)

---

### 6. Access Attacker Machine
Log in to the powered-on Windows 10 (attacker).  
![Attacker Login](./img/10.switch_to_the_powerred_on_windows_10(attacker)_and_log_in.png)

---

### 7. Install Theef Client on Attacker
Locate the Theef RAT folder in the shared drive, run `client210.exe`, and bypass the security warning.  
![Locate Client](./img/11.locate_your_THEEF_remote_access_trojan_location-in_shared_drive.png)  
![Run Client](./img/12.double-click_on_client210.png)  
![Bypass Warning](./img/13.click_run_on_the_security_warning_dialog_box.png)  
![Theef Main Window](./img/14.theef_main_window_appears.png)

---

### 8. Establish Connection to Victim
Enter the victim’s IP, keep default FTP and port settings, and connect.  
![Enter IP](./img/15.enter_the_ip_of_target_and_leave_ftp_and_port_as_default_and_click_connect.png)  
![Connection Accepted](./img/16.connection_accepted.png)

---

### 9. Enter Spy Mode
Click the Spy icon to access attack options.  
![Spy Icon](./img/17.click_spy_icon_to_perform_different_attack.png)  
![Attack Options](./img/18.various_attacks_that_could_be_performed_appear.png)

---

### 10. Monitor Victim Processes
Use Task Manager to view running processes on the victim, verify on the victim machine, and close Task Manager on the attacker.  
![Task Manager](./img/19.click_task_manager_and_refresh.png)  
![Processes Refreshed](./img/20.click_refresh_icon_to_see_the_running_process_compromised_machine.png)  
![Confirm on Victim](./img/21.switch_to_windows_server(victim)_to_confirm.png)  
![Close Task Manager](./img/22.switch_back_to_windows10(attacker)_and_close_task_manager.png)

---

### 11. Start Keylogging
Activate the keylogger and start logging keystrokes.  
![Keylogger](./img/23.click_keylogger.png)  
![Keylogger Running](./img/24.keylogger_popup_appear_click_play_icon_to_start_key_logging.png)

---

### 12. Simulate Activity on Victim
On the victim machine, open WordPad and type text.  
![Open WordPad](./img/25.switch_to_windows_server_and_open_wordpad.png)  
![Typing](./img/26.type_into_the_opened_wordpad.png)

---

### 13. Check Logged Keys
Return to the attacker machine to view captured keystrokes and close the keylogger.  
![Captured Keys](./img/27.switch_to_attacker_windows10_to_see_logged_key.png)  
![Close Keylogger](./img/28.close_key_logger.png)

---

## Observations
- Theef RAT successfully connected the attacker to the victim, bypassing basic pfSense rules (due to permissive settings for testing).  
- Task Manager provided visibility into victim processes.  
- Keylogging captured real-time keystrokes, showing data exfiltration risks.  
- VMware snapshots ensured a safe testing environment.  

## Recommendations
- Deploy antivirus and endpoint detection to block RAT executables.  
- Tighten pfSense rules to restrict unknown ports and monitor traffic.  
- Conduct such tests only in isolated, authorized environments to avoid ethical or legal issues.  

## Conclusion
This project highlights the dangers of RATs like Theef in a controlled red team exercise. The detailed steps demonstrate ease of deployment and underscore the need for strong cybersecurity measures.
